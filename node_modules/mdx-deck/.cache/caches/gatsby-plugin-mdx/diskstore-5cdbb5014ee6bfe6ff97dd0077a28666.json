{"expireTime":9007200822210371000,"key":"gatsby-plugin-mdx-entire-payload-9a770a0a2038e381cac368d941903056-","val":{"mdast":{"type":"root","children":[{"type":"import","value":"import myTheme from './theme'","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":30,"offset":29},"indent":[]}},{"type":"export","value":"export const themes = [myTheme]","position":{"start":{"line":3,"column":1,"offset":31},"end":{"line":3,"column":32,"offset":62},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"React Context","position":{"start":{"line":5,"column":3,"offset":66},"end":{"line":5,"column":16,"offset":79},"indent":[]}}],"position":{"start":{"line":5,"column":1,"offset":64},"end":{"line":5,"column":16,"offset":79},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":7,"column":1,"offset":81},"end":{"line":7,"column":4,"offset":84},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Why review Context?","position":{"start":{"line":9,"column":3,"offset":88},"end":{"line":9,"column":22,"offset":107},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":86},"end":{"line":9,"column":22,"offset":107},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"ü§∑‚Äç‚ôÇÔ∏è","position":{"start":{"line":11,"column":3,"offset":111},"end":{"line":11,"column":8,"offset":116},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":109},"end":{"line":11,"column":8,"offset":116},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":13,"column":1,"offset":118},"end":{"line":13,"column":4,"offset":121},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"inlineCode","value":"consumer-website","position":{"start":{"line":15,"column":3,"offset":125},"end":{"line":15,"column":21,"offset":143},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":123},"end":{"line":15,"column":21,"offset":143},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The Gatsby repo uses ","position":{"start":{"line":17,"column":1,"offset":145},"end":{"line":17,"column":22,"offset":166},"indent":[]}},{"type":"inlineCode","value":"Context","position":{"start":{"line":17,"column":22,"offset":166},"end":{"line":17,"column":31,"offset":175},"indent":[]}},{"type":"text","value":" in several places:","position":{"start":{"line":17,"column":31,"offset":175},"end":{"line":17,"column":50,"offset":194},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":145},"end":{"line":17,"column":50,"offset":194},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"FeatureFlagsContext","position":{"start":{"line":19,"column":3,"offset":198},"end":{"line":19,"column":24,"offset":219},"indent":[]}}],"position":{"start":{"line":19,"column":3,"offset":198},"end":{"line":19,"column":24,"offset":219},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":196},"end":{"line":19,"column":24,"offset":219},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"LocaleContext","position":{"start":{"line":20,"column":3,"offset":222},"end":{"line":20,"column":18,"offset":237},"indent":[]}}],"position":{"start":{"line":20,"column":3,"offset":222},"end":{"line":20,"column":18,"offset":237},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":220},"end":{"line":20,"column":18,"offset":237},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ThemeContext","position":{"start":{"line":21,"column":3,"offset":240},"end":{"line":21,"column":17,"offset":254},"indent":[]}}],"position":{"start":{"line":21,"column":3,"offset":240},"end":{"line":21,"column":17,"offset":254},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":238},"end":{"line":21,"column":17,"offset":254},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ScrollContext","position":{"start":{"line":22,"column":3,"offset":257},"end":{"line":22,"column":18,"offset":272},"indent":[]}}],"position":{"start":{"line":22,"column":3,"offset":257},"end":{"line":22,"column":18,"offset":272},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":255},"end":{"line":22,"column":18,"offset":272},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"UtmParamContext","position":{"start":{"line":23,"column":3,"offset":275},"end":{"line":23,"column":20,"offset":292},"indent":[]}}],"position":{"start":{"line":23,"column":3,"offset":275},"end":{"line":23,"column":20,"offset":292},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":273},"end":{"line":23,"column":20,"offset":292},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":196},"end":{"line":23,"column":20,"offset":292},"indent":[1,1,1,1]}},{"type":"thematicBreak","position":{"start":{"line":25,"column":1,"offset":294},"end":{"line":25,"column":4,"offset":297},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Using these ","position":{"start":{"line":27,"column":1,"offset":299},"end":{"line":27,"column":13,"offset":311},"indent":[]}},{"type":"inlineCode","value":"Context","position":{"start":{"line":27,"column":13,"offset":311},"end":{"line":27,"column":22,"offset":320},"indent":[]}},{"type":"text","value":" components incorrectly can lead to üêõüêû.","position":{"start":{"line":27,"column":22,"offset":320},"end":{"line":27,"column":63,"offset":361},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":299},"end":{"line":27,"column":63,"offset":361},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"So, let's review how they work!","position":{"start":{"line":29,"column":1,"offset":363},"end":{"line":29,"column":32,"offset":394},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":363},"end":{"line":29,"column":32,"offset":394},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":31,"column":1,"offset":396},"end":{"line":31,"column":5,"offset":400},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"What does Context look like?","position":{"start":{"line":33,"column":3,"offset":404},"end":{"line":33,"column":31,"offset":432},"indent":[]}}],"position":{"start":{"line":33,"column":1,"offset":402},"end":{"line":33,"column":31,"offset":432},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":35,"column":1,"offset":434},"end":{"line":35,"column":4,"offset":437},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Context","position":{"start":{"line":37,"column":3,"offset":441},"end":{"line":37,"column":10,"offset":448},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":439},"end":{"line":37,"column":10,"offset":448},"indent":[]}},{"type":"paragraph","children":[{"type":"inlineCode","value":"Context","position":{"start":{"line":39,"column":1,"offset":450},"end":{"line":39,"column":10,"offset":459},"indent":[]}},{"type":"text","value":" = ","position":{"start":{"line":39,"column":10,"offset":459},"end":{"line":39,"column":13,"offset":462},"indent":[]}},{"type":"inlineCode","value":"Provider(s)","position":{"start":{"line":39,"column":13,"offset":462},"end":{"line":39,"column":26,"offset":475},"indent":[]}},{"type":"text","value":" + ","position":{"start":{"line":39,"column":26,"offset":475},"end":{"line":39,"column":29,"offset":478},"indent":[]}},{"type":"inlineCode","value":"Consumers","position":{"start":{"line":39,"column":29,"offset":478},"end":{"line":39,"column":40,"offset":489},"indent":[]}}],"position":{"start":{"line":39,"column":1,"offset":450},"end":{"line":39,"column":40,"offset":489},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Create a new ","position":{"start":{"line":41,"column":4,"offset":494},"end":{"line":41,"column":17,"offset":507},"indent":[]}},{"type":"inlineCode","value":"Context","position":{"start":{"line":41,"column":17,"offset":507},"end":{"line":41,"column":26,"offset":516},"indent":[]}}],"position":{"start":{"line":41,"column":4,"offset":494},"end":{"line":41,"column":26,"offset":516},"indent":[]}}],"position":{"start":{"line":41,"column":1,"offset":491},"end":{"line":41,"column":26,"offset":516},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Create a value and the logic that updates it","position":{"start":{"line":42,"column":4,"offset":520},"end":{"line":42,"column":48,"offset":564},"indent":[]}}],"position":{"start":{"line":42,"column":4,"offset":520},"end":{"line":42,"column":48,"offset":564},"indent":[]}}],"position":{"start":{"line":42,"column":1,"offset":517},"end":{"line":42,"column":48,"offset":564},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Pass the value to a ","position":{"start":{"line":43,"column":4,"offset":568},"end":{"line":43,"column":24,"offset":588},"indent":[]}},{"type":"inlineCode","value":"Provider","position":{"start":{"line":43,"column":24,"offset":588},"end":{"line":43,"column":34,"offset":598},"indent":[]}}],"position":{"start":{"line":43,"column":4,"offset":568},"end":{"line":43,"column":34,"offset":598},"indent":[]}}],"position":{"start":{"line":43,"column":1,"offset":565},"end":{"line":43,"column":34,"offset":598},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Consume the value with ","position":{"start":{"line":44,"column":4,"offset":602},"end":{"line":44,"column":27,"offset":625},"indent":[]}},{"type":"inlineCode","value":"Consumers","position":{"start":{"line":44,"column":27,"offset":625},"end":{"line":44,"column":38,"offset":636},"indent":[]}}],"position":{"start":{"line":44,"column":4,"offset":602},"end":{"line":44,"column":38,"offset":636},"indent":[]}}],"position":{"start":{"line":44,"column":1,"offset":599},"end":{"line":44,"column":38,"offset":636},"indent":[]}}],"position":{"start":{"line":41,"column":1,"offset":491},"end":{"line":44,"column":38,"offset":636},"indent":[1,1,1]}},{"type":"thematicBreak","position":{"start":{"line":46,"column":1,"offset":638},"end":{"line":46,"column":4,"offset":641},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Why use Context?","position":{"start":{"line":48,"column":3,"offset":645},"end":{"line":48,"column":19,"offset":661},"indent":[]}}],"position":{"start":{"line":48,"column":1,"offset":643},"end":{"line":48,"column":19,"offset":661},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":50,"column":1,"offset":663},"end":{"line":50,"column":4,"offset":666},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Global state","position":{"start":{"line":52,"column":3,"offset":670},"end":{"line":52,"column":15,"offset":682},"indent":[]}}],"position":{"start":{"line":52,"column":1,"offset":668},"end":{"line":52,"column":15,"offset":682},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Context let's you send values to components down the tree without passing them as props through every level.","position":{"start":{"line":54,"column":1,"offset":684},"end":{"line":54,"column":109,"offset":792},"indent":[]}}],"position":{"start":{"line":54,"column":1,"offset":684},"end":{"line":54,"column":109,"offset":792},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Whenever the ","position":{"start":{"line":56,"column":1,"offset":794},"end":{"line":56,"column":14,"offset":807},"indent":[]}},{"type":"inlineCode","value":"Provider","position":{"start":{"line":56,"column":14,"offset":807},"end":{"line":56,"column":24,"offset":817},"indent":[]}},{"type":"text","value":" receives a new value, it transmits it to each ","position":{"start":{"line":56,"column":24,"offset":817},"end":{"line":56,"column":71,"offset":864},"indent":[]}},{"type":"inlineCode","value":"Consumer","position":{"start":{"line":56,"column":71,"offset":864},"end":{"line":56,"column":81,"offset":874},"indent":[]}},{"type":"text","value":", which re-renders. üì°","position":{"start":{"line":56,"column":81,"offset":874},"end":{"line":56,"column":103,"offset":896},"indent":[]}}],"position":{"start":{"line":56,"column":1,"offset":794},"end":{"line":56,"column":103,"offset":896},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This can be help synchronize values across the component tree, like theme styles, localization, etc.","position":{"start":{"line":58,"column":1,"offset":898},"end":{"line":58,"column":101,"offset":998},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":898},"end":{"line":58,"column":101,"offset":998},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":60,"column":1,"offset":1000},"end":{"line":60,"column":4,"offset":1003},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"How to use Context?","position":{"start":{"line":62,"column":3,"offset":1007},"end":{"line":62,"column":22,"offset":1026},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":1005},"end":{"line":62,"column":22,"offset":1026},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":64,"column":1,"offset":1028},"end":{"line":64,"column":4,"offset":1031},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Create Context","position":{"start":{"line":66,"column":3,"offset":1035},"end":{"line":66,"column":17,"offset":1049},"indent":[]}}],"position":{"start":{"line":66,"column":1,"offset":1033},"end":{"line":66,"column":17,"offset":1049},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Create a new ","position":{"start":{"line":68,"column":4,"offset":1054},"end":{"line":68,"column":17,"offset":1067},"indent":[]}},{"type":"inlineCode","value":"Context","position":{"start":{"line":68,"column":17,"offset":1067},"end":{"line":68,"column":26,"offset":1076},"indent":[]}},{"type":"text","value":" instance","position":{"start":{"line":68,"column":26,"offset":1076},"end":{"line":68,"column":35,"offset":1085},"indent":[]}}],"position":{"start":{"line":68,"column":4,"offset":1054},"end":{"line":68,"column":35,"offset":1085},"indent":[]}}],"position":{"start":{"line":68,"column":1,"offset":1051},"end":{"line":68,"column":35,"offset":1085},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Optionally, give it a default value (only used if no ","position":{"start":{"line":69,"column":4,"offset":1089},"end":{"line":69,"column":57,"offset":1142},"indent":[]}},{"type":"inlineCode","value":"Provider","position":{"start":{"line":69,"column":57,"offset":1142},"end":{"line":69,"column":67,"offset":1152},"indent":[]}},{"type":"text","value":")","position":{"start":{"line":69,"column":67,"offset":1152},"end":{"line":69,"column":68,"offset":1153},"indent":[]}}],"position":{"start":{"line":69,"column":4,"offset":1089},"end":{"line":69,"column":68,"offset":1153},"indent":[]}}],"position":{"start":{"line":69,"column":1,"offset":1086},"end":{"line":69,"column":68,"offset":1153},"indent":[]}}],"position":{"start":{"line":68,"column":1,"offset":1051},"end":{"line":69,"column":68,"offset":1153},"indent":[1]}},{"type":"code","lang":"jsx","meta":null,"value":"import { createContext } from 'react'\n\nconst NewContext = createContext(defaultValue);","position":{"start":{"line":71,"column":1,"offset":1155},"end":{"line":75,"column":4,"offset":1252},"indent":[1,1,1,1]}},{"type":"thematicBreak","position":{"start":{"line":77,"column":1,"offset":1254},"end":{"line":77,"column":4,"offset":1257},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Add a Provider","position":{"start":{"line":79,"column":3,"offset":1261},"end":{"line":79,"column":17,"offset":1275},"indent":[]}}],"position":{"start":{"line":79,"column":1,"offset":1259},"end":{"line":79,"column":17,"offset":1275},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Generally, add ","position":{"start":{"line":81,"column":4,"offset":1280},"end":{"line":81,"column":19,"offset":1295},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"one","position":{"start":{"line":81,"column":20,"offset":1296},"end":{"line":81,"column":23,"offset":1299},"indent":[]}}],"position":{"start":{"line":81,"column":19,"offset":1295},"end":{"line":81,"column":24,"offset":1300},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":81,"column":24,"offset":1300},"end":{"line":81,"column":25,"offset":1301},"indent":[]}},{"type":"inlineCode","value":"Provider","position":{"start":{"line":81,"column":25,"offset":1301},"end":{"line":81,"column":35,"offset":1311},"indent":[]}},{"type":"text","value":" component as high up the component tree as necessary to wrap all ","position":{"start":{"line":81,"column":35,"offset":1311},"end":{"line":81,"column":101,"offset":1377},"indent":[]}},{"type":"inlineCode","value":"Consumers","position":{"start":{"line":81,"column":101,"offset":1377},"end":{"line":81,"column":112,"offset":1388},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":81,"column":112,"offset":1388},"end":{"line":81,"column":113,"offset":1389},"indent":[]}}],"position":{"start":{"line":81,"column":4,"offset":1280},"end":{"line":81,"column":113,"offset":1389},"indent":[]}}],"position":{"start":{"line":81,"column":1,"offset":1277},"end":{"line":81,"column":113,"offset":1389},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Add nested ","position":{"start":{"line":82,"column":4,"offset":1393},"end":{"line":82,"column":15,"offset":1404},"indent":[]}},{"type":"inlineCode","value":"Provider","position":{"start":{"line":82,"column":15,"offset":1404},"end":{"line":82,"column":25,"offset":1414},"indent":[]}},{"type":"text","value":" instances if you need to override the main instance in a specific part of the tree (rare).","position":{"start":{"line":82,"column":25,"offset":1414},"end":{"line":82,"column":116,"offset":1505},"indent":[]}}],"position":{"start":{"line":82,"column":4,"offset":1393},"end":{"line":82,"column":116,"offset":1505},"indent":[]}}],"position":{"start":{"line":82,"column":1,"offset":1390},"end":{"line":82,"column":116,"offset":1505},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":83,"column":4,"offset":1509},"end":{"line":83,"column":8,"offset":1513},"indent":[]}},{"type":"inlineCode","value":"Provider","position":{"start":{"line":83,"column":8,"offset":1513},"end":{"line":83,"column":18,"offset":1523},"indent":[]}},{"type":"text","value":" is always implemented as a ","position":{"start":{"line":83,"column":18,"offset":1523},"end":{"line":83,"column":46,"offset":1551},"indent":[]}},{"type":"inlineCode","value":"JSX","position":{"start":{"line":83,"column":46,"offset":1551},"end":{"line":83,"column":51,"offset":1556},"indent":[]}},{"type":"text","value":" wrapper:","position":{"start":{"line":83,"column":51,"offset":1556},"end":{"line":83,"column":60,"offset":1565},"indent":[]}}],"position":{"start":{"line":83,"column":4,"offset":1509},"end":{"line":83,"column":60,"offset":1565},"indent":[]}}],"position":{"start":{"line":83,"column":1,"offset":1506},"end":{"line":83,"column":60,"offset":1565},"indent":[]}}],"position":{"start":{"line":81,"column":1,"offset":1277},"end":{"line":83,"column":60,"offset":1565},"indent":[1,1]}},{"type":"code","lang":"jsx","meta":null,"value":"import NewContext from './NewContext'\n\n<NewContext.Provider value={/* some value */}>\n  {/* children */}\n</NewContext.Provider>","position":{"start":{"line":85,"column":1,"offset":1567},"end":{"line":91,"column":4,"offset":1705},"indent":[1,1,1,1,1,1]}},{"type":"thematicBreak","position":{"start":{"line":93,"column":1,"offset":1707},"end":{"line":93,"column":4,"offset":1710},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Add Consumers","position":{"start":{"line":95,"column":3,"offset":1714},"end":{"line":95,"column":16,"offset":1727},"indent":[]}}],"position":{"start":{"line":95,"column":1,"offset":1712},"end":{"line":95,"column":16,"offset":1727},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Use ","position":{"start":{"line":97,"column":4,"offset":1732},"end":{"line":97,"column":8,"offset":1736},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"multiple","position":{"start":{"line":97,"column":9,"offset":1737},"end":{"line":97,"column":17,"offset":1745},"indent":[]}}],"position":{"start":{"line":97,"column":8,"offset":1736},"end":{"line":97,"column":18,"offset":1746},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":97,"column":18,"offset":1746},"end":{"line":97,"column":19,"offset":1747},"indent":[]}},{"type":"inlineCode","value":"Consumers","position":{"start":{"line":97,"column":19,"offset":1747},"end":{"line":97,"column":30,"offset":1758},"indent":[]}}],"position":{"start":{"line":97,"column":4,"offset":1732},"end":{"line":97,"column":30,"offset":1758},"indent":[]}}],"position":{"start":{"line":97,"column":1,"offset":1729},"end":{"line":97,"column":30,"offset":1758},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Place each ","position":{"start":{"line":98,"column":4,"offset":1762},"end":{"line":98,"column":15,"offset":1773},"indent":[]}},{"type":"inlineCode","value":"Consumer","position":{"start":{"line":98,"column":15,"offset":1773},"end":{"line":98,"column":25,"offset":1783},"indent":[]}},{"type":"text","value":" as close to the component that uses it as possible (ideally, ","position":{"start":{"line":98,"column":25,"offset":1783},"end":{"line":98,"column":87,"offset":1845},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"inside","position":{"start":{"line":98,"column":88,"offset":1846},"end":{"line":98,"column":94,"offset":1852},"indent":[]}}],"position":{"start":{"line":98,"column":87,"offset":1845},"end":{"line":98,"column":95,"offset":1853},"indent":[]}},{"type":"text","value":" that component)","position":{"start":{"line":98,"column":95,"offset":1853},"end":{"line":98,"column":111,"offset":1869},"indent":[]}}],"position":{"start":{"line":98,"column":4,"offset":1762},"end":{"line":98,"column":111,"offset":1869},"indent":[]}}],"position":{"start":{"line":98,"column":1,"offset":1759},"end":{"line":98,"column":111,"offset":1869},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"A ","position":{"start":{"line":99,"column":4,"offset":1873},"end":{"line":99,"column":6,"offset":1875},"indent":[]}},{"type":"inlineCode","value":"Consumer","position":{"start":{"line":99,"column":6,"offset":1875},"end":{"line":99,"column":16,"offset":1885},"indent":[]}},{"type":"text","value":" receives its value from the nearest ","position":{"start":{"line":99,"column":16,"offset":1885},"end":{"line":99,"column":53,"offset":1922},"indent":[]}},{"type":"inlineCode","value":"Provider","position":{"start":{"line":99,"column":53,"offset":1922},"end":{"line":99,"column":63,"offset":1932},"indent":[]}}],"position":{"start":{"line":99,"column":4,"offset":1873},"end":{"line":99,"column":63,"offset":1932},"indent":[]}}],"position":{"start":{"line":99,"column":1,"offset":1870},"end":{"line":99,"column":63,"offset":1932},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"A ","position":{"start":{"line":100,"column":4,"offset":1936},"end":{"line":100,"column":6,"offset":1938},"indent":[]}},{"type":"inlineCode","value":"Consumer","position":{"start":{"line":100,"column":6,"offset":1938},"end":{"line":100,"column":16,"offset":1948},"indent":[]}},{"type":"text","value":" can be implemented as a ","position":{"start":{"line":100,"column":16,"offset":1948},"end":{"line":100,"column":41,"offset":1973},"indent":[]}},{"type":"inlineCode","value":"JSX","position":{"start":{"line":100,"column":41,"offset":1973},"end":{"line":100,"column":46,"offset":1978},"indent":[]}},{"type":"text","value":" wrapper (using the render prop pattern) or with a hook:","position":{"start":{"line":100,"column":46,"offset":1978},"end":{"line":100,"column":102,"offset":2034},"indent":[]}}],"position":{"start":{"line":100,"column":4,"offset":1936},"end":{"line":100,"column":102,"offset":2034},"indent":[]}}],"position":{"start":{"line":100,"column":1,"offset":1933},"end":{"line":100,"column":102,"offset":2034},"indent":[]}}],"position":{"start":{"line":97,"column":1,"offset":1729},"end":{"line":100,"column":102,"offset":2034},"indent":[1,1,1]}},{"type":"thematicBreak","position":{"start":{"line":102,"column":1,"offset":2036},"end":{"line":102,"column":4,"offset":2039},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Add Consumers","position":{"start":{"line":104,"column":3,"offset":2043},"end":{"line":104,"column":16,"offset":2056},"indent":[]}}],"position":{"start":{"line":104,"column":1,"offset":2041},"end":{"line":104,"column":16,"offset":2056},"indent":[]}},{"type":"code","lang":"jsx","meta":null,"value":"import NewContext from './NewContext'\n\n<NewContext.Consumer>\n  {value => /* JSX using value */}\n</NewContext.Consumer>","position":{"start":{"line":106,"column":1,"offset":2058},"end":{"line":112,"column":4,"offset":2187},"indent":[1,1,1,1,1,1]}},{"type":"code","lang":"jsx","meta":null,"value":"import { useContext } from 'react'\nimport NewContext from './NewContext'\n\nfunction MyComponent() {\n  const value = useContext(NewContext);\n\n  return /* JSX using value */\n}","position":{"start":{"line":114,"column":1,"offset":2189},"end":{"line":123,"column":4,"offset":2372},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"thematicBreak","position":{"start":{"line":125,"column":1,"offset":2374},"end":{"line":125,"column":4,"offset":2377},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"What can go wrong?","position":{"start":{"line":127,"column":3,"offset":2381},"end":{"line":127,"column":21,"offset":2399},"indent":[]}}],"position":{"start":{"line":127,"column":1,"offset":2379},"end":{"line":127,"column":21,"offset":2399},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":129,"column":1,"offset":2401},"end":{"line":129,"column":4,"offset":2404},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Unintentional Re-renders üîÅ","position":{"start":{"line":131,"column":4,"offset":2409},"end":{"line":131,"column":31,"offset":2436},"indent":[]}}],"position":{"start":{"line":131,"column":1,"offset":2406},"end":{"line":131,"column":31,"offset":2436},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When a ","position":{"start":{"line":133,"column":1,"offset":2438},"end":{"line":133,"column":8,"offset":2445},"indent":[]}},{"type":"inlineCode","value":"Consumer","position":{"start":{"line":133,"column":8,"offset":2445},"end":{"line":133,"column":18,"offset":2455},"indent":[]}},{"type":"text","value":" re-renders, it re-renders any extra components that are wrapped by ","position":{"start":{"line":133,"column":18,"offset":2455},"end":{"line":133,"column":86,"offset":2523},"indent":[]}},{"type":"inlineCode","value":"<Consumer />","position":{"start":{"line":133,"column":86,"offset":2523},"end":{"line":133,"column":100,"offset":2537},"indent":[]}},{"type":"text","value":" or inside the component calling ","position":{"start":{"line":133,"column":100,"offset":2537},"end":{"line":133,"column":133,"offset":2570},"indent":[]}},{"type":"inlineCode","value":"useContext()","position":{"start":{"line":133,"column":133,"offset":2570},"end":{"line":133,"column":147,"offset":2584},"indent":[]}},{"type":"text","value":" as well.","position":{"start":{"line":133,"column":147,"offset":2584},"end":{"line":133,"column":156,"offset":2593},"indent":[]}}],"position":{"start":{"line":133,"column":1,"offset":2438},"end":{"line":133,"column":156,"offset":2593},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"These unintentional re-renders reset each component to its initial state, which can break the UI. üò±","position":{"start":{"line":135,"column":1,"offset":2595},"end":{"line":135,"column":101,"offset":2695},"indent":[]}}],"position":{"start":{"line":135,"column":1,"offset":2595},"end":{"line":135,"column":101,"offset":2695},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":137,"column":1,"offset":2697},"end":{"line":137,"column":4,"offset":2700},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Scrolling bug üêõ","position":{"start":{"line":139,"column":3,"offset":2704},"end":{"line":139,"column":19,"offset":2720},"indent":[]}}],"position":{"start":{"line":139,"column":1,"offset":2702},"end":{"line":139,"column":19,"offset":2720},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The scrolling bug on the two live pages was happening because the entire page was unintentionally re-rendering every time the user scrolled.","position":{"start":{"line":141,"column":1,"offset":2722},"end":{"line":141,"column":141,"offset":2862},"indent":[]}}],"position":{"start":{"line":141,"column":1,"offset":2722},"end":{"line":141,"column":141,"offset":2862},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"These unintentional re-renders reset all images to their blurred state, reset all accordions to showing their first pane, etc.","position":{"start":{"line":143,"column":1,"offset":2864},"end":{"line":143,"column":127,"offset":2990},"indent":[]}}],"position":{"start":{"line":143,"column":1,"offset":2864},"end":{"line":143,"column":127,"offset":2990},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"TODO: link to old deploy with the issue?","position":{"start":{"line":145,"column":1,"offset":2992},"end":{"line":145,"column":41,"offset":3032},"indent":[]}}],"position":{"start":{"line":145,"column":1,"offset":2992},"end":{"line":145,"column":41,"offset":3032},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":147,"column":1,"offset":3034},"end":{"line":147,"column":4,"offset":3037},"indent":[]}},{"type":"paragraph","children":[{"type":"inlineCode","value":"pages/en-ca/smart-thermostat-voice.js","position":{"start":{"line":149,"column":1,"offset":3039},"end":{"line":149,"column":40,"offset":3078},"indent":[]}}],"position":{"start":{"line":149,"column":1,"offset":3039},"end":{"line":149,"column":40,"offset":3078},"indent":[]}},{"type":"code","lang":"jsx","meta":null,"value":"// ...\nreturn (\n  <ScrollProvider>\n    <ScrollContext.Consumer>\n      {({ navClass }) => (\n        <NavComponent navClass={navClass} />\n        <ComponentThatShouldNotReRender1 />\n        <ComponentThatShouldNotReRender2 />\n        // ...\n        <ComponentThatShouldNotReRender10 />\n      )}\n    </ScrollContext.Consumer>\n  </ScrollProvider>\n)","position":{"start":{"line":151,"column":1,"offset":3080},"end":{"line":166,"column":4,"offset":3435},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"thematicBreak","position":{"start":{"line":168,"column":1,"offset":3437},"end":{"line":168,"column":4,"offset":3440},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Solution","position":{"start":{"line":170,"column":3,"offset":3444},"end":{"line":170,"column":11,"offset":3452},"indent":[]}}],"position":{"start":{"line":170,"column":1,"offset":3442},"end":{"line":170,"column":11,"offset":3452},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Move the ","position":{"start":{"line":172,"column":4,"offset":3457},"end":{"line":172,"column":13,"offset":3466},"indent":[]}},{"type":"inlineCode","value":"Provider","position":{"start":{"line":172,"column":13,"offset":3466},"end":{"line":172,"column":23,"offset":3476},"indent":[]}},{"type":"text","value":" up the tree into ","position":{"start":{"line":172,"column":23,"offset":3476},"end":{"line":172,"column":41,"offset":3494},"indent":[]}},{"type":"inlineCode","value":"AppProvider","position":{"start":{"line":172,"column":41,"offset":3494},"end":{"line":172,"column":54,"offset":3507},"indent":[]}}],"position":{"start":{"line":172,"column":4,"offset":3457},"end":{"line":172,"column":54,"offset":3507},"indent":[]}}],"position":{"start":{"line":172,"column":1,"offset":3454},"end":{"line":172,"column":54,"offset":3507},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Move the ","position":{"start":{"line":173,"column":4,"offset":3511},"end":{"line":173,"column":13,"offset":3520},"indent":[]}},{"type":"inlineCode","value":"Consumer","position":{"start":{"line":173,"column":13,"offset":3520},"end":{"line":173,"column":23,"offset":3530},"indent":[]}},{"type":"text","value":" down the tree into ","position":{"start":{"line":173,"column":23,"offset":3530},"end":{"line":173,"column":43,"offset":3550},"indent":[]}},{"type":"inlineCode","value":"NavComponent","position":{"start":{"line":173,"column":43,"offset":3550},"end":{"line":173,"column":57,"offset":3564},"indent":[]}}],"position":{"start":{"line":173,"column":4,"offset":3511},"end":{"line":173,"column":57,"offset":3564},"indent":[]}}],"position":{"start":{"line":173,"column":1,"offset":3508},"end":{"line":173,"column":57,"offset":3564},"indent":[]}}],"position":{"start":{"line":172,"column":1,"offset":3454},"end":{"line":173,"column":57,"offset":3564},"indent":[1]}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://www.ecobee.com/en-ca/smart-thermostat-voice/","children":[{"type":"text","value":"https://www.ecobee.com/en-ca/smart-thermostat-voice/","position":{"start":{"line":175,"column":2,"offset":3567},"end":{"line":175,"column":54,"offset":3619},"indent":[]}}],"position":{"start":{"line":175,"column":1,"offset":3566},"end":{"line":175,"column":109,"offset":3674},"indent":[]}}],"position":{"start":{"line":175,"column":1,"offset":3566},"end":{"line":175,"column":109,"offset":3674},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":177,"column":1,"offset":3676},"end":{"line":177,"column":4,"offset":3679},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"TL;DR","position":{"start":{"line":179,"column":3,"offset":3683},"end":{"line":179,"column":8,"offset":3688},"indent":[]}}],"position":{"start":{"line":179,"column":1,"offset":3681},"end":{"line":179,"column":8,"offset":3688},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Pair one ","position":{"start":{"line":181,"column":4,"offset":3693},"end":{"line":181,"column":13,"offset":3702},"indent":[]}},{"type":"inlineCode","value":"Provider","position":{"start":{"line":181,"column":13,"offset":3702},"end":{"line":181,"column":23,"offset":3712},"indent":[]}},{"type":"text","value":" with multiple ","position":{"start":{"line":181,"column":23,"offset":3712},"end":{"line":181,"column":38,"offset":3727},"indent":[]}},{"type":"inlineCode","value":"Consumers","position":{"start":{"line":181,"column":38,"offset":3727},"end":{"line":181,"column":49,"offset":3738},"indent":[]}}],"position":{"start":{"line":181,"column":4,"offset":3693},"end":{"line":181,"column":49,"offset":3738},"indent":[]}}],"position":{"start":{"line":181,"column":1,"offset":3690},"end":{"line":181,"column":49,"offset":3738},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Add the ","position":{"start":{"line":182,"column":4,"offset":3742},"end":{"line":182,"column":12,"offset":3750},"indent":[]}},{"type":"inlineCode","value":"Provider","position":{"start":{"line":182,"column":12,"offset":3750},"end":{"line":182,"column":22,"offset":3760},"indent":[]}},{"type":"text","value":" high enough to wrap all ","position":{"start":{"line":182,"column":22,"offset":3760},"end":{"line":182,"column":47,"offset":3785},"indent":[]}},{"type":"inlineCode","value":"Consumers","position":{"start":{"line":182,"column":47,"offset":3785},"end":{"line":182,"column":58,"offset":3796},"indent":[]}}],"position":{"start":{"line":182,"column":4,"offset":3742},"end":{"line":182,"column":58,"offset":3796},"indent":[]}}],"position":{"start":{"line":182,"column":1,"offset":3739},"end":{"line":182,"column":58,"offset":3796},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Isolate the ","position":{"start":{"line":183,"column":4,"offset":3800},"end":{"line":183,"column":16,"offset":3812},"indent":[]}},{"type":"inlineCode","value":"JSX","position":{"start":{"line":183,"column":16,"offset":3812},"end":{"line":183,"column":21,"offset":3817},"indent":[]}},{"type":"text","value":" that should re-render and place each ","position":{"start":{"line":183,"column":21,"offset":3817},"end":{"line":183,"column":59,"offset":3855},"indent":[]}},{"type":"inlineCode","value":"Consumer","position":{"start":{"line":183,"column":59,"offset":3855},"end":{"line":183,"column":69,"offset":3865},"indent":[]}},{"type":"text","value":" as close to it as possible","position":{"start":{"line":183,"column":69,"offset":3865},"end":{"line":183,"column":96,"offset":3892},"indent":[]}}],"position":{"start":{"line":183,"column":4,"offset":3800},"end":{"line":183,"column":96,"offset":3892},"indent":[]}}],"position":{"start":{"line":183,"column":1,"offset":3797},"end":{"line":183,"column":96,"offset":3892},"indent":[]}}],"position":{"start":{"line":181,"column":1,"offset":3690},"end":{"line":183,"column":96,"offset":3892},"indent":[1,1]}},{"type":"thematicBreak","position":{"start":{"line":185,"column":1,"offset":3894},"end":{"line":185,"column":4,"offset":3897},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Links","position":{"start":{"line":187,"column":3,"offset":3901},"end":{"line":187,"column":8,"offset":3906},"indent":[]}}],"position":{"start":{"line":187,"column":1,"offset":3899},"end":{"line":187,"column":8,"offset":3906},"indent":[]}},{"type":"paragraph","children":[{"type":"inlineCode","value":"Context","position":{"start":{"line":189,"column":1,"offset":3908},"end":{"line":189,"column":10,"offset":3917},"indent":[]}},{"type":"text","value":": \n","position":{"start":{"line":189,"column":10,"offset":3917},"end":{"line":190,"column":1,"offset":3920},"indent":[1]}},{"type":"link","title":null,"url":"https://reactjs.org/docs/context.html","children":[{"type":"text","value":"https://reactjs.org/docs/context.html","position":{"start":{"line":190,"column":2,"offset":3921},"end":{"line":190,"column":39,"offset":3958},"indent":[]}}],"position":{"start":{"line":190,"column":1,"offset":3920},"end":{"line":190,"column":79,"offset":3998},"indent":[]}}],"position":{"start":{"line":189,"column":1,"offset":3908},"end":{"line":190,"column":79,"offset":3998},"indent":[1]}},{"type":"paragraph","children":[{"type":"inlineCode","value":"useContext","position":{"start":{"line":192,"column":1,"offset":4000},"end":{"line":192,"column":13,"offset":4012},"indent":[]}},{"type":"text","value":":\n","position":{"start":{"line":192,"column":13,"offset":4012},"end":{"line":193,"column":1,"offset":4014},"indent":[1]}},{"type":"link","title":null,"url":"https://reactjs.org/docs/hooks-reference.html#usecontext","children":[{"type":"text","value":"https://reactjs.org/docs/hooks-reference.html#usecontext","position":{"start":{"line":193,"column":2,"offset":4015},"end":{"line":193,"column":58,"offset":4071},"indent":[]}}],"position":{"start":{"line":193,"column":1,"offset":4014},"end":{"line":193,"column":117,"offset":4130},"indent":[]}}],"position":{"start":{"line":192,"column":1,"offset":4000},"end":{"line":193,"column":117,"offset":4130},"indent":[1]}},{"type":"export","value":"export const _frontmatter = {}","position":{"start":{"line":196,"column":1,"offset":4133},"end":{"line":196,"column":31,"offset":4163},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":196,"column":31,"offset":4163}}},"scopeImports":["import myTheme from './theme'","import React from 'react'"],"scopeIdentifiers":["myTheme","React"],"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar themes = [myTheme];\nvar _frontmatter = {};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  themes: themes,\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", null, \"React Context\"), mdx(\"hr\", null), mdx(\"h1\", null, \"Why review Context?\"), mdx(\"h1\", null, \"\\uD83E\\uDD37\\u200D\\u2642\\uFE0F\"), mdx(\"hr\", null), mdx(\"h1\", null, mdx(\"inlineCode\", {\n    parentName: \"h1\"\n  }, \"consumer-website\")), mdx(\"p\", null, \"The Gatsby repo uses \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Context\"), \" in several places:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"FeatureFlagsContext\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"LocaleContext\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"ThemeContext\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"ScrollContext\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"UtmParamContext\"))), mdx(\"hr\", null), mdx(\"p\", null, \"Using these \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Context\"), \" components incorrectly can lead to \\uD83D\\uDC1B\\uD83D\\uDC1E.\"), mdx(\"p\", null, \"So, let's review how they work!\"), mdx(\"hr\", null), mdx(\"h1\", null, \"What does Context look like?\"), mdx(\"hr\", null), mdx(\"h1\", null, \"Context\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Context\"), \" = \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Provider(s)\"), \" + \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Consumers\")), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Create a new \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Context\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Create a value and the logic that updates it\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Pass the value to a \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Provider\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Consume the value with \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Consumers\"))), mdx(\"hr\", null), mdx(\"h1\", null, \"Why use Context?\"), mdx(\"hr\", null), mdx(\"h1\", null, \"Global state\"), mdx(\"p\", null, \"Context let's you send values to components down the tree without passing them as props through every level.\"), mdx(\"p\", null, \"Whenever the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Provider\"), \" receives a new value, it transmits it to each \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Consumer\"), \", which re-renders. \\uD83D\\uDCE1\"), mdx(\"p\", null, \"This can be help synchronize values across the component tree, like theme styles, localization, etc.\"), mdx(\"hr\", null), mdx(\"h1\", null, \"How to use Context?\"), mdx(\"hr\", null), mdx(\"h1\", null, \"Create Context\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Create a new \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Context\"), \" instance\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Optionally, give it a default value (only used if no \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Provider\"), \")\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\"\n  }), \"import { createContext } from 'react'\\n\\nconst NewContext = createContext(defaultValue);\\n\")), mdx(\"hr\", null), mdx(\"h1\", null, \"Add a Provider\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Generally, add \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"one\"), \" \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Provider\"), \" component as high up the component tree as necessary to wrap all \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Consumers\"), \".\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Add nested \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Provider\"), \" instances if you need to override the main instance in a specific part of the tree (rare).\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Provider\"), \" is always implemented as a \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"JSX\"), \" wrapper:\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\"\n  }), \"import NewContext from './NewContext'\\n\\n<NewContext.Provider value={/* some value */}>\\n  {/* children */}\\n</NewContext.Provider>\\n\")), mdx(\"hr\", null), mdx(\"h1\", null, \"Add Consumers\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Use \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"multiple\"), \" \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Consumers\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Place each \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Consumer\"), \" as close to the component that uses it as possible (ideally, \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"inside\"), \" that component)\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"A \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Consumer\"), \" receives its value from the nearest \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Provider\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"A \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Consumer\"), \" can be implemented as a \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"JSX\"), \" wrapper (using the render prop pattern) or with a hook:\")), mdx(\"hr\", null), mdx(\"h1\", null, \"Add Consumers\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\"\n  }), \"import NewContext from './NewContext'\\n\\n<NewContext.Consumer>\\n  {value => /* JSX using value */}\\n</NewContext.Consumer>\\n\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\"\n  }), \"import { useContext } from 'react'\\nimport NewContext from './NewContext'\\n\\nfunction MyComponent() {\\n  const value = useContext(NewContext);\\n\\n  return /* JSX using value */\\n}\\n\")), mdx(\"hr\", null), mdx(\"h1\", null, \"What can go wrong?\"), mdx(\"hr\", null), mdx(\"h2\", null, \"Unintentional Re-renders \\uD83D\\uDD01\"), mdx(\"p\", null, \"When a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Consumer\"), \" re-renders, it re-renders any extra components that are wrapped by \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<Consumer />\"), \" or inside the component calling \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useContext()\"), \" as well.\"), mdx(\"p\", null, \"These unintentional re-renders reset each component to its initial state, which can break the UI. \\uD83D\\uDE31\"), mdx(\"hr\", null), mdx(\"h1\", null, \"Scrolling bug \\uD83D\\uDC1B\"), mdx(\"p\", null, \"The scrolling bug on the two live pages was happening because the entire page was unintentionally re-rendering every time the user scrolled.\"), mdx(\"p\", null, \"These unintentional re-renders reset all images to their blurred state, reset all accordions to showing their first pane, etc.\"), mdx(\"p\", null, \"TODO: link to old deploy with the issue?\"), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pages/en-ca/smart-thermostat-voice.js\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\"\n  }), \"// ...\\nreturn (\\n  <ScrollProvider>\\n    <ScrollContext.Consumer>\\n      {({ navClass }) => (\\n        <NavComponent navClass={navClass} />\\n        <ComponentThatShouldNotReRender1 />\\n        <ComponentThatShouldNotReRender2 />\\n        // ...\\n        <ComponentThatShouldNotReRender10 />\\n      )}\\n    </ScrollContext.Consumer>\\n  </ScrollProvider>\\n)\\n\")), mdx(\"hr\", null), mdx(\"h1\", null, \"Solution\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Move the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Provider\"), \" up the tree into \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"AppProvider\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Move the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Consumer\"), \" down the tree into \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"NavComponent\"))), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.ecobee.com/en-ca/smart-thermostat-voice/\"\n  }), \"https://www.ecobee.com/en-ca/smart-thermostat-voice/\")), mdx(\"hr\", null), mdx(\"h1\", null, \"TL;DR\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Pair one \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Provider\"), \" with multiple \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Consumers\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Add the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Provider\"), \" high enough to wrap all \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Consumers\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Isolate the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"JSX\"), \" that should re-render and place each \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Consumer\"), \" as close to it as possible\")), mdx(\"hr\", null), mdx(\"h1\", null, \"Links\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Context\"), \":\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://reactjs.org/docs/context.html\"\n  }), \"https://reactjs.org/docs/context.html\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useContext\"), \":\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://reactjs.org/docs/hooks-reference.html#usecontext\"\n  }), \"https://reactjs.org/docs/hooks-reference.html#usecontext\")));\n}\n;\nMDXContent.isMDXComponent = true;","rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\nimport myTheme from './theme'\nexport const themes = [myTheme];\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  themes,\n_frontmatter\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1>{`React Context`}</h1>\n    <hr></hr>\n    <h1>{`Why review Context?`}</h1>\n    <h1>{`ü§∑‚Äç‚ôÇÔ∏è`}</h1>\n    <hr></hr>\n    <h1><inlineCode parentName=\"h1\">{`consumer-website`}</inlineCode></h1>\n    <p>{`The Gatsby repo uses `}<inlineCode parentName=\"p\">{`Context`}</inlineCode>{` in several places:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`FeatureFlagsContext`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`LocaleContext`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`ThemeContext`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`ScrollContext`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`UtmParamContext`}</inlineCode></li>\n    </ul>\n    <hr></hr>\n    <p>{`Using these `}<inlineCode parentName=\"p\">{`Context`}</inlineCode>{` components incorrectly can lead to üêõüêû.`}</p>\n    <p>{`So, let's review how they work!`}</p>\n    <hr></hr>\n    <h1>{`What does Context look like?`}</h1>\n    <hr></hr>\n    <h1>{`Context`}</h1>\n    <p><inlineCode parentName=\"p\">{`Context`}</inlineCode>{` = `}<inlineCode parentName=\"p\">{`Provider(s)`}</inlineCode>{` + `}<inlineCode parentName=\"p\">{`Consumers`}</inlineCode></p>\n    <ol>\n      <li parentName=\"ol\">{`Create a new `}<inlineCode parentName=\"li\">{`Context`}</inlineCode></li>\n      <li parentName=\"ol\">{`Create a value and the logic that updates it`}</li>\n      <li parentName=\"ol\">{`Pass the value to a `}<inlineCode parentName=\"li\">{`Provider`}</inlineCode></li>\n      <li parentName=\"ol\">{`Consume the value with `}<inlineCode parentName=\"li\">{`Consumers`}</inlineCode></li>\n    </ol>\n    <hr></hr>\n    <h1>{`Why use Context?`}</h1>\n    <hr></hr>\n    <h1>{`Global state`}</h1>\n    <p>{`Context let's you send values to components down the tree without passing them as props through every level.`}</p>\n    <p>{`Whenever the `}<inlineCode parentName=\"p\">{`Provider`}</inlineCode>{` receives a new value, it transmits it to each `}<inlineCode parentName=\"p\">{`Consumer`}</inlineCode>{`, which re-renders. üì°`}</p>\n    <p>{`This can be help synchronize values across the component tree, like theme styles, localization, etc.`}</p>\n    <hr></hr>\n    <h1>{`How to use Context?`}</h1>\n    <hr></hr>\n    <h1>{`Create Context`}</h1>\n    <ol>\n      <li parentName=\"ol\">{`Create a new `}<inlineCode parentName=\"li\">{`Context`}</inlineCode>{` instance`}</li>\n      <li parentName=\"ol\">{`Optionally, give it a default value (only used if no `}<inlineCode parentName=\"li\">{`Provider`}</inlineCode>{`)`}</li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`import { createContext } from 'react'\n\nconst NewContext = createContext(defaultValue);\n`}</code></pre>\n    <hr></hr>\n    <h1>{`Add a Provider`}</h1>\n    <ol>\n      <li parentName=\"ol\">{`Generally, add `}<em parentName=\"li\">{`one`}</em>{` `}<inlineCode parentName=\"li\">{`Provider`}</inlineCode>{` component as high up the component tree as necessary to wrap all `}<inlineCode parentName=\"li\">{`Consumers`}</inlineCode>{`.`}</li>\n      <li parentName=\"ol\">{`Add nested `}<inlineCode parentName=\"li\">{`Provider`}</inlineCode>{` instances if you need to override the main instance in a specific part of the tree (rare).`}</li>\n      <li parentName=\"ol\">{`The `}<inlineCode parentName=\"li\">{`Provider`}</inlineCode>{` is always implemented as a `}<inlineCode parentName=\"li\">{`JSX`}</inlineCode>{` wrapper:`}</li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`import NewContext from './NewContext'\n\n<NewContext.Provider value={/* some value */}>\n  {/* children */}\n</NewContext.Provider>\n`}</code></pre>\n    <hr></hr>\n    <h1>{`Add Consumers`}</h1>\n    <ol>\n      <li parentName=\"ol\">{`Use `}<em parentName=\"li\">{`multiple`}</em>{` `}<inlineCode parentName=\"li\">{`Consumers`}</inlineCode></li>\n      <li parentName=\"ol\">{`Place each `}<inlineCode parentName=\"li\">{`Consumer`}</inlineCode>{` as close to the component that uses it as possible (ideally, `}<em parentName=\"li\">{`inside`}</em>{` that component)`}</li>\n      <li parentName=\"ol\">{`A `}<inlineCode parentName=\"li\">{`Consumer`}</inlineCode>{` receives its value from the nearest `}<inlineCode parentName=\"li\">{`Provider`}</inlineCode></li>\n      <li parentName=\"ol\">{`A `}<inlineCode parentName=\"li\">{`Consumer`}</inlineCode>{` can be implemented as a `}<inlineCode parentName=\"li\">{`JSX`}</inlineCode>{` wrapper (using the render prop pattern) or with a hook:`}</li>\n    </ol>\n    <hr></hr>\n    <h1>{`Add Consumers`}</h1>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`import NewContext from './NewContext'\n\n<NewContext.Consumer>\n  {value => /* JSX using value */}\n</NewContext.Consumer>\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`import { useContext } from 'react'\nimport NewContext from './NewContext'\n\nfunction MyComponent() {\n  const value = useContext(NewContext);\n\n  return /* JSX using value */\n}\n`}</code></pre>\n    <hr></hr>\n    <h1>{`What can go wrong?`}</h1>\n    <hr></hr>\n    <h2>{`Unintentional Re-renders üîÅ`}</h2>\n    <p>{`When a `}<inlineCode parentName=\"p\">{`Consumer`}</inlineCode>{` re-renders, it re-renders any extra components that are wrapped by `}<inlineCode parentName=\"p\">{`<Consumer />`}</inlineCode>{` or inside the component calling `}<inlineCode parentName=\"p\">{`useContext()`}</inlineCode>{` as well.`}</p>\n    <p>{`These unintentional re-renders reset each component to its initial state, which can break the UI. üò±`}</p>\n    <hr></hr>\n    <h1>{`Scrolling bug üêõ`}</h1>\n    <p>{`The scrolling bug on the two live pages was happening because the entire page was unintentionally re-rendering every time the user scrolled.`}</p>\n    <p>{`These unintentional re-renders reset all images to their blurred state, reset all accordions to showing their first pane, etc.`}</p>\n    <p>{`TODO: link to old deploy with the issue?`}</p>\n    <hr></hr>\n    <p><inlineCode parentName=\"p\">{`pages/en-ca/smart-thermostat-voice.js`}</inlineCode></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`// ...\nreturn (\n  <ScrollProvider>\n    <ScrollContext.Consumer>\n      {({ navClass }) => (\n        <NavComponent navClass={navClass} />\n        <ComponentThatShouldNotReRender1 />\n        <ComponentThatShouldNotReRender2 />\n        // ...\n        <ComponentThatShouldNotReRender10 />\n      )}\n    </ScrollContext.Consumer>\n  </ScrollProvider>\n)\n`}</code></pre>\n    <hr></hr>\n    <h1>{`Solution`}</h1>\n    <ol>\n      <li parentName=\"ol\">{`Move the `}<inlineCode parentName=\"li\">{`Provider`}</inlineCode>{` up the tree into `}<inlineCode parentName=\"li\">{`AppProvider`}</inlineCode></li>\n      <li parentName=\"ol\">{`Move the `}<inlineCode parentName=\"li\">{`Consumer`}</inlineCode>{` down the tree into `}<inlineCode parentName=\"li\">{`NavComponent`}</inlineCode></li>\n    </ol>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://www.ecobee.com/en-ca/smart-thermostat-voice/\"\n      }}>{`https://www.ecobee.com/en-ca/smart-thermostat-voice/`}</a></p>\n    <hr></hr>\n    <h1>{`TL;DR`}</h1>\n    <ol>\n      <li parentName=\"ol\">{`Pair one `}<inlineCode parentName=\"li\">{`Provider`}</inlineCode>{` with multiple `}<inlineCode parentName=\"li\">{`Consumers`}</inlineCode></li>\n      <li parentName=\"ol\">{`Add the `}<inlineCode parentName=\"li\">{`Provider`}</inlineCode>{` high enough to wrap all `}<inlineCode parentName=\"li\">{`Consumers`}</inlineCode></li>\n      <li parentName=\"ol\">{`Isolate the `}<inlineCode parentName=\"li\">{`JSX`}</inlineCode>{` that should re-render and place each `}<inlineCode parentName=\"li\">{`Consumer`}</inlineCode>{` as close to it as possible`}</li>\n    </ol>\n    <hr></hr>\n    <h1>{`Links`}</h1>\n    <p><inlineCode parentName=\"p\">{`Context`}</inlineCode>{`:\n`}<a parentName=\"p\" {...{\n        \"href\": \"https://reactjs.org/docs/context.html\"\n      }}>{`https://reactjs.org/docs/context.html`}</a></p>\n    <p><inlineCode parentName=\"p\">{`useContext`}</inlineCode>{`:\n`}<a parentName=\"p\" {...{\n        \"href\": \"https://reactjs.org/docs/hooks-reference.html#usecontext\"\n      }}>{`https://reactjs.org/docs/hooks-reference.html#usecontext`}</a></p>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}